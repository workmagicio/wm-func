<!DOCTYPE html>
<html>
<head>
    <title>å‰ç«¯åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
    </style>
</head>
<body>
    <h1>ğŸ§ª æ•°æ®ç›‘æ§çœ‹æ¿å‰ç«¯åŠŸèƒ½æµ‹è¯•</h1>
    
    <div id="test-results"></div>
    
    <h2>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h2>
    <ol>
        <li>é¡µé¢åŠ è½½åï¼Œæ£€æŸ¥åˆ·æ–°æŒ‰é’®çŠ¶æ€ï¼ˆåº”è¯¥ç¦ç”¨ï¼‰</li>
        <li>é€‰æ‹©å¹³å°åï¼Œæ£€æŸ¥åˆ·æ–°æŒ‰é’®çŠ¶æ€ï¼ˆåº”è¯¥å¯ç”¨ï¼‰</li>
        <li>æ£€æŸ¥ç¼“å­˜ä¿¡æ¯æ˜¾ç¤º</li>
        <li>æµ‹è¯•åˆ·æ–°åŠŸèƒ½</li>
    </ol>
    
    <h2>ğŸ¯ æœŸæœ›ç»“æœ</h2>
    <ul>
        <li>âœ… åˆ·æ–°æŒ‰é’®åœ¨é€‰æ‹©å¹³å°åå¯ç”¨</li>
        <li>âœ… æ˜¾ç¤ºæ•°æ®æœ€åæ›´æ–°æ—¶é—´</li>
        <li>âœ… æ˜¾ç¤ºç¼“å­˜çŠ¶æ€æ ‡è¯†ï¼ˆæœ€æ–°/ç¼“å­˜/å·²è¿‡æœŸï¼‰</li>
        <li>âœ… ç‚¹å‡»åˆ·æ–°æŒ‰é’®å¯ä»¥å¼ºåˆ¶æ›´æ–°æ•°æ®</li>
    </ul>
    
    <h2>ğŸ”— æµ‹è¯•é“¾æ¥</h2>
    <p><a href="http://localhost:8090/" target="_blank" style="font-size: 18px; color: #007bff;">
        ğŸš€ æ‰“å¼€æ•°æ®ç›‘æ§çœ‹æ¿è¿›è¡Œæµ‹è¯•
    </a></p>
    
    <script>
        const results = document.getElementById('test-results');
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }
        
        // æµ‹è¯•APIè¿æ¥
        async function testAPI() {
            try {
                addResult('ğŸ” æ­£åœ¨æµ‹è¯•APIè¿æ¥...', 'info');
                
                const response = await fetch('http://localhost:8090/api/platforms');
                const data = await response.json();
                
                if (data.success) {
                    addResult(`âœ… APIè¿æ¥æ­£å¸¸ï¼Œå‘ç° ${data.data.length} ä¸ªå¹³å°`, 'success');
                    
                    // æµ‹è¯•Googleå¹³å°æ•°æ®
                    const googleResponse = await fetch('http://localhost:8090/api/data/google');
                    const googleData = await googleResponse.json();
                    
                    if (googleData.success && googleData.cache_info) {
                        const cacheInfo = googleData.cache_info;
                        const updateTime = new Date(cacheInfo.updated_at).toLocaleString();
                        addResult(`âœ… ç¼“å­˜åŠŸèƒ½æ­£å¸¸ï¼Œæ•°æ®æ›´æ–°æ—¶é—´: ${updateTime}`, 'success');
                        addResult(`ğŸ“Š ç¼“å­˜çŠ¶æ€: ${cacheInfo.is_expired ? 'å·²è¿‡æœŸ' : 'æœ‰æ•ˆ'}`, 'success');
                    } else {
                        addResult('âš ï¸ ç¼“å­˜ä¿¡æ¯ç¼ºå¤±', 'error');
                    }
                } else {
                    addResult('âŒ APIè¿æ¥å¤±è´¥: ' + data.message, 'error');
                }
            } catch (error) {
                addResult('âŒ ç½‘ç»œé”™è¯¯: ' + error.message, 'error');
            }
        }
        
        // é¡µé¢åŠ è½½åè‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', testAPI);
    </script>
</body>
</html>
