<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon Vendoråˆ†æ - 90å¤©è®¢å•è¶‹åŠ¿ç›‘æ§é¢„è­¦</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/amazon-orders.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="header-title">ğŸ›’ Amazon Vendoråˆ†æ</h1>
            <p class="header-subtitle">90å¤©Amazon Vendorè®¢å•è¶‹åŠ¿ç›‘æ§é¢„è­¦ - æ™ºèƒ½æ£€æµ‹æ‰0å’Œå‡¹å½¢å¼‚å¸¸</p>
            <div class="navigation">
                <a href="/" class="nav-link">ğŸ  æ•°æ®ç›‘æ§çœ‹æ¿</a>
                <span class="nav-separator">|</span>
                <a href="/attribution" class="nav-link">ğŸ“ˆ å½’å› è®¢å•åˆ†æ</a>
                <span class="nav-separator">|</span>
                <span class="nav-current">ğŸ›’ Amazon Vendoråˆ†æ</span>
            </div>
        </header>

        <!-- Controls -->
        <div class="controls-section">
            <div class="control-group">
                <button id="refresh-button" class="refresh-button" onclick="amazonOrdersApp.refreshData()">
                    <span class="refresh-icon">ğŸ”„</span>
                    <span class="refresh-text">åˆ·æ–°æ•°æ®</span>
                </button>
                
                <div class="cache-info" id="cache-info">
                    <div class="cache-status">
                        <span class="cache-label">ç¼“å­˜æ—¶é—´:</span>
                        <span class="cache-time" id="cache-time">--</span>
                        <span class="cache-badge" id="cache-badge">æ°¸ä¹…ç¼“å­˜</span>
                    </div>
                    <div class="data-date-info" id="data-date-info" style="margin-left: 20px;">
                        <span class="data-date-label">æ•°æ®æˆªæ­¢:</span>
                        <span class="data-date-value" id="data-end-date">--</span>
                    </div>
                </div>
            </div>
            
            <div class="loading-indicator" id="loading-indicator" style="display: none;">
                <span class="spinner"></span>
                <span>æ•°æ®åŠ è½½ä¸­...</span>
            </div>
        </div>

        <!-- Data Processing Rules -->
        <div class="data-rules-section">
            <div class="data-rules-header">
                <h3>ğŸ“‹ æ•°æ®å¤„ç†è§„åˆ™</h3>
                <span class="rules-toggle" onclick="toggleRules()">ğŸ”½</span>
            </div>
            <div class="data-rules-content" id="data-rules-content">
                <div class="rules-grid">
                    <div class="rule-item">
                        <div class="rule-icon">ğŸ¯</div>
                        <div class="rule-content">
                            <div class="rule-title">å›ºå®š90å¤©åˆ†æ</div>
                            <div class="rule-desc">å›ºå®šåˆ†ææœ€è¿‘90å¤©çš„Amazon Vendorè®¢å•æ•°æ®ï¼Œè®¡ç®—æ—¥å¹³å‡å€¼å’Œé¢„è­¦é˜ˆå€¼</div>
                        </div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-icon">âš ï¸</div>
                        <div class="rule-content">
                            <div class="rule-title">æ™ºèƒ½é¢„è­¦ç³»ç»Ÿ</div>
                            <div class="rule-desc">
                                <div>ğŸ”´ <span class="critical-marker">Critical</span>: å­˜åœ¨å‡¹å½¢å¼‚å¸¸</div>
                                <div>ğŸŸ¡ <span class="warning-marker">Warning</span>: å­˜åœ¨æ‰0å¤©æ•°</div>
                                <div>ğŸŸ¢ <span class="normal-marker">Normal</span>: æ•°æ®æ­£å¸¸ï¼Œæ— å¼‚å¸¸</div>
                            </div>
                        </div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-icon">ğŸš¨</div>
                        <div class="rule-content">
                            <div class="rule-title">å¼‚å¸¸æ£€æµ‹</div>
                            <div class="rule-desc">
                                <div>ğŸš¨ <span class="zero-marker">æ‰0</span>: å‰é¢è¿ç»­2å¤©æœ‰è®¢å•ï¼Œç„¶åçªç„¶å˜æˆ0</div>
                                <div>ğŸ”¶ <span class="concave-marker">å‡¹å½¢</span>: æ­£å¸¸æ•°æ®â†’è¿ç»­ä½å€¼(ä½äºå¹³å‡30%)â†’æ­£å¸¸æ•°æ®</div>
                            </div>
                        </div>
                    </div>
                    <div class="rule-item">
                        <div class="rule-icon">ğŸ“Š</div>
                        <div class="rule-content">
                            <div class="rule-title">æ°¸ä¹…ç¼“å­˜</div>
                            <div class="rule-desc">æ•°æ®æ°¸ä¹…ç¼“å­˜ï¼Œæ˜¾ç¤ºæœ€åç¼“å­˜æ—¶é—´ï¼Œæ”¯æŒæ‰‹åŠ¨åˆ·æ–°è·å–æœ€æ–°æ•°æ®</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Summary -->
        <div class="stats-summary" id="stats-summary" style="display: none;">
            <div class="stat-item">
                <span class="stat-label">æ€»ç§Ÿæˆ·æ•°:</span>
                <span class="stat-value" id="total-tenants">--</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">å¼‚å¸¸ç§Ÿæˆ·:</span>
                <span class="stat-value" id="anomaly-tenants">--</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Criticalçº§åˆ«:</span>
                <span class="stat-value critical-marker" id="critical-count">--</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Warningçº§åˆ«:</span>
                <span class="stat-value warning-marker" id="warning-count">--</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">æ€»è®¢å•æ•°:</span>
                <span class="stat-value" id="total-orders">--</span>
            </div>
        </div>

        <!-- Charts Container -->
        <div class="charts-container" id="charts-container">
            <div class="no-data-message" id="no-data-message" style="display: none;">
                <h3>ğŸ›’ æš‚æ— æ•°æ®</h3>
                <p>æœªæ‰¾åˆ°Amazon Vendorè®¢å•æ•°æ®ï¼Œè¯·æ£€æŸ¥æ•°æ®æºæˆ–åˆ·æ–°æ•°æ®</p>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/static/js/amazon-orders-charts.js"></script>
    <script src="/static/js/amazon-orders-app.js"></script>
    <script>
        // åˆå§‹åŒ–åº”ç”¨
        const amazonOrdersApp = new AmazonOrdersApp();
        amazonOrdersApp.init();

        // æ•°æ®è§„åˆ™å±•å¼€/æ”¶èµ·
        function toggleRules() {
            const content = document.getElementById('data-rules-content');
            const toggle = document.querySelector('.rules-toggle');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                toggle.textContent = 'ğŸ”¼';
            } else {
                content.style.display = 'none';
                toggle.textContent = 'ğŸ”½';
            }
        }

        // é»˜è®¤æ”¶èµ·è§„åˆ™è¯´æ˜
        document.addEventListener('DOMContentLoaded', function() {
            const content = document.getElementById('data-rules-content');
            content.style.display = 'none';
        });
    </script>
</body>
</html>
